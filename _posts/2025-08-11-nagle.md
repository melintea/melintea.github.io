---
layout: post
title: 40 ms delays
---

If you are victimized by misterious delays in your TCP traffic, especially the light type of traffic, even in the local traffic: consider the (Nagle algorithm)[https://en.wikipedia.org/wiki/Nagle%27s_algorithm]. In this case, the observed delays are 40 ms.

A (long) time ago the kernel had a parameter to turn Nagle off globally: ```/proc/sys/net/ipv4/tcp_low_latency```. This dissapeared with 4.14 and later versions. If you upgraded tghe kernel, you might start experiancing misterious delays. The only way to wrestle Nagle now is per socket: ```setsockopt(TCP_NODELAY)```

