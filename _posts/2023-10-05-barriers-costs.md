---
layout: post
title: A note on barriers costs
---

On Intel, avoid std::memory_order_seq_cst and std::memory_order_acq_rel. If you can...

![_config.yml]({{ site.baseurl }}/images/barriers-intel2.png)
![_config.yml]({{ site.baseurl }}/images/barriers-intel1.png)


    Threads  R&W:plain   R&W:cst      R:acq/W:rel  R:cons/W:rel  R&W:acqrel   R&W:rlxd
    -------  --------    -------      -----------  ------------  -------      -----------
    1        33127114    137253027    14527492     14390159      83419552     15516709
    2        65544331    111611757    40904954     29246743      118626628    51504383
    4        76579883    324397517    88833451     93580268      344201518    68938834
    8        136478453   674507507    156113484    160151688     730754759    142440185
    16       343907409   1520126869   309321524    307596361     1449977644   266249518
    32       535688807   2960453288   630654026    556672636     2865121020   605446567
    64       1223356722  5768121877   1142276229   1156412571    5832937534   1261543095
    128      2539714413  11670599124  2204149831   2106698462    11955427568  2328507084

